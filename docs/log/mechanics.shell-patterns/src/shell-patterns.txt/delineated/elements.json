["factor", [["chapter", [["admonition", [["directory", [["item", [["key", ["title"], {}], ["value", [["paragraph", ["", ["literal", ["Variety of Shell Programming Practices"], {"cast": null}], ""], {"indentation": 2}]], {}]], {"identifier": "title"}]], {}]], {"type": "CONTEXT", "title": null}], ["paragraph", ["The practices described here are not necessarily considered superior.", " ", "Rather, it's just a protocol, pattern, to achieve some functional", " ", "or aesthetic goal. The practices of a working environment will likely take", " ", "precedence in most cases where some conflict of style is present."], {"indentation": 0}], ["section", [["paragraph", ["Limiting the used features to that of POSIX shell.", " ", "While vectors can certainly be useful, often it is the case that", " ", "use of non-standard features are a good indicator that", " ", "shell might not be the right choice. Python, Perl, and Ruby are all", " ", "likely candidates for a shell script that has evolved into something more."], {"indentation": null}]], {"identifier": "Bourne Limitations", "absolute": ["Bourne Limitations"], "selector-path": ["Bourne Limitations"], "selector-level": null, "selector-multiple": null}], ["section", [["paragraph", ["While shell is normally capable of being arbitrary indented,", " ", "use of the ", "", ["literal", [":"], {"cast": "command"}], " with an if-statement creates a natural", " ", "opportunity to indent when it is desired to group a set of commands."], {"indentation": null}], ["syntax", [["line", ["if : Comment; then"], {}], ["line", ["\t# Section"], {}], ["line", ["\tSETTING=..."], {}], ["line", ["\tCommand ..."], {}], ["line", ["\texport SETTING"], {}], ["line", ["fi"], {}], ["line", [""], {}]], {"type": "shell", "qualifier": null}], ["paragraph", ["While not a substantial improvement to just indenting after a comment,", " ", "there is the possibility of overriding the ", "", ["literal", [":"], {"cast": "command"}], " to perform", " ", "filtering of specific sections."], {"indentation": 0}]], {"identifier": "Unconditional Indentation", "absolute": ["Unconditional Indentation"], "selector-path": ["Unconditional Indentation"], "selector-level": null, "selector-multiple": null}], ["section", [["paragraph", ["Bracket syntax, ", ["literal", ["[ ... ]"], {"cast": null}], ", for conditionals is the common form among authors."], {"indentation": null}], ["syntax", [["line", ["if [ 0 = $VAR ]"], {}], ["line", ["then"], {}], ["line", ["\t..."], {}], ["line", ["fi"], {}], ["line", [""], {}]], {"type": "shell", "qualifier": null}], ["paragraph", ["However, it lends to the idea that the statement is somehow special where", " ", "the flow control method is merely reacting to the exit status of a", " ", "command, builtin or system."], {"indentation": 0}], ["paragraph", ["By preferring \"Command Syntax\" for conditionals, it serves as a reminder that", " ", "it is just that, a command."], {"indentation": null}], ["syntax", [["line", ["if test 0 = $VAR"], {}], ["line", ["then"], {}], ["line", ["\t..."], {}], ["line", ["fi"], {}], ["line", [""], {}]], {"type": "shell", "qualifier": null}]], {"identifier": "Command Syntax with Flow Control Conditions", "absolute": ["Command Syntax with Flow Control Conditions"], "selector-path": ["Command Syntax with Flow Control Conditions"], "selector-level": null, "selector-multiple": null}], ["section", [["paragraph", ["Subshells are a great way to limit the scope of a specific execution context.", " ", "Where appropriate, use them to:"], {"indentation": null}], ["set", [["item", [["paragraph", ["Push and pop the current working directory: ", ["literal", ["(cd; pwd-sensitive-command)"], {"cast": null}], "."], {"indentation": null}]], {}], ["item", [["paragraph", ["Temporarily override environment variables. Notably, ", ["literal", ["PATH"], {"cast": null}], " to control commands."], {"indentation": null}]], {}], ["item", [["paragraph", ["Leverage ", ["literal", ["exit"], {"cast": null}], " based \"long\" jumps. Exit the subshell from a function called at any depth."], {"indentation": null}]], {}]], {}]], {"identifier": "Subshell More", "absolute": ["Subshell More"], "selector-path": ["Subshell More"], "selector-level": null, "selector-multiple": null}], ["section", [["paragraph", ["The grave accent command substitution syntax can be difficult to read in some cases.", " ", "Parenthesis are much more legible and can be nested."], {"indentation": null}]], {"identifier": "Grave Accent Avoidance", "absolute": ["Grave Accent Avoidance"], "selector-path": ["Grave Accent Avoidance"], "selector-level": null, "selector-multiple": null}], ["section", [["paragraph", ["Not always, but usually. There's no guarantee that filesystem paths are clean of", " ", "field separators, but it is guaranteed that quoting your expansion will keep ", ["literal", ["$IFS"], {"cast": null}], "", " ", "from separating fields."], {"indentation": null}]], {"identifier": "Always Be Quoting", "absolute": ["Always Be Quoting"], "selector-path": ["Always Be Quoting"], "selector-level": null, "selector-multiple": null}], ["section", [["paragraph", ["While unlikely of importance today, there were shells that would drop fields given", " ", "that an expansion yielded an empty string or referenced an unset variable.", " ", "A common cure for this was to include a constant prefix on strings where acceptable:"], {"indentation": null}], ["syntax", [["line", ["# Without the `x` prefix, \"$VAR\" would get dropped as a field entirely"], {}], ["line", ["# by some shell implementations. Even when quoted."], {}], ["line", ["test x\"\" = x\"$VAR\" && handle_empty_string_case"], {}], ["line", [""], {}]], {"type": "shell", "qualifier": null}], ["paragraph", ["This is only useful when trying to maximize the portability of a script."], {"indentation": 0}]], {"identifier": "Test Strings with Constant Prefixes", "absolute": ["Test Strings with Constant Prefixes"], "selector-path": ["Test Strings with Constant Prefixes"], "selector-level": null, "selector-multiple": null}], ["section", [["directory", [["item", [["key", ["Linters"], {}], ["value", [["set", [["item", [["paragraph", ["", ["reference", null, {"source": "<https://shellcheck.net>", "type": "hyperlink", "action": null, "cast": null, "url": "https://shellcheck.net"}], ""], {"indentation": null}]], {}]], {}]], {}]], {"identifier": "Linters"}]], {}]], {"identifier": "Modern Tooling", "absolute": ["Modern Tooling"], "selector-path": ["Modern Tooling"], "selector-level": null, "selector-multiple": null}]], {}]], {}]