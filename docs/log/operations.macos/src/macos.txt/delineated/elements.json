["factor", [["chapter", [["section", [["paragraph", ["Date App[pid:tid] CoreText note: Client requested name \".SFNSMono-Regular\", it will get Times-Roman rather than the intended font. All system UI font access should be through proper APIs such as CTFontCreateUIFontForLanguage() or +[NSFont systemFontOfSize:]."], {"indentation": 0}], ["paragraph", ["Correct by installing SFMono:", " ", "", ["literal", ["open /System/Applications/Utilities/Terminal.app/Resources/Fonts/*"], {"cast": null}], ""], {"indentation": null}]], {"identifier": "Bugs", "absolute": ["Bugs"], "selector-path": ["Bugs"], "selector-level": null, "selector-multiple": null}], ["section", [["section", [["syntax", [["line", ["# Also, ComputerName and LocalHostName."], {}], ["line", ["scutil \u2013-set HostName \"host.name\""], {}], ["line", [""], {}]], {"type": "syntax/shell", "qualifier": null}]], {"identifier": "Set Hostname", "absolute": ["Recall", "Set Hostname"], "selector-path": ["Set Hostname"], "selector-level": 1, "selector-multiple": null}], ["section", [["paragraph", ["Enable or disable checks:"], {"indentation": null}], ["syntax", [["line", ["spctl --master-disable"], {}], ["line", ["spctl --master-enable"], {}], ["line", [""], {}]], {"type": "syntax/shell", "qualifier": null}], ["paragraph", ["Signing:"], {"indentation": 0}], ["syntax", [["line", ["codesign -f -s - \"/path/to/executable\""], {}], ["line", [""], {}]], {"type": "syntax/shell", "qualifier": null}]], {"identifier": "Code Signatures", "absolute": ["Recall", "Code Signatures"], "selector-path": ["Code Signatures"], "selector-level": 1, "selector-multiple": null}]], {"identifier": "Recall", "absolute": ["Recall"], "selector-path": ["Recall"], "selector-level": null, "selector-multiple": null}], ["section", [["directory", [["item", [["key", ["Globals"], {}], ["value", [["syntax", [["line", ["defaults write -g \\"], {}], ["line", ["\tApplePressAndHoldEnabled -bool false \\"], {}], ["line", ["\tInitialKeyRepeat -int 9 \\"], {}], ["line", ["\tKeyRepeat -int 1 \\"], {}], ["line", ["\tNSAutomaticCapitalizationEnabled -bool false \\"], {}], ["line", ["\tNSDocumentSaveNewDocumentsToCloud -bool false \\"], {}], ["line", ["\tcom.apple.screencapture disable-shadow -bool true \\"], {}], ["line", [""], {}]], {"type": "syntax/shell", "qualifier": null}]], {}]], {"identifier": "Globals"}], ["item", [["key", ["DiskUtility"], {}], ["value", [["syntax", [["line", ["defaults write com.apple.DiskUtility \\"], {}], ["line", ["\tDUDebugMenuEnabled -bool true \\"], {}], ["line", ["\tadvanced-image-options -bool true \\"], {}], ["line", [""], {}]], {"type": "syntax/shell", "qualifier": null}]], {}]], {"identifier": "DiskUtility"}], ["item", [["key", ["Terminal"], {}], ["value", [["syntax", [["line", ["defaults write com.apple.terminal \\"], {}], ["line", ["\tSecureKeyboardEntry -bool true"], {}], ["line", [""], {}]], {"type": "syntax/shell", "qualifier": null}]], {}]], {"identifier": "Terminal"}]], {}]], {"identifier": "Defaults", "absolute": ["Defaults"], "selector-path": ["Defaults"], "selector-level": null, "selector-multiple": null}], ["section", [["syntax", [["line", ["for x in"], {}], ["line", ["\t\"Apple Bitpool Max (editable)\""], {}], ["line", ["\t\"Apple Bitpool Min (editable)\""], {}], ["line", ["\t\"Apple Initial Bitpool (editable)\""], {}], ["line", ["\t\"Apple Initial Bitpool Min (editable)\""], {}], ["line", ["\t\"Negotiated Bitpool\""], {}], ["line", ["\t\"Negotiated Bitpool Max\""], {}], ["line", ["\t\"Negotiated Bitpool Min\""], {}], ["line", ["do"], {}], ["line", ["\tdefaults write com.apple.BluetoothAudioAgent \"$x\" -int 40"], {}], ["line", ["done"], {}], ["line", [""], {}]], {"type": "syntax/shell", "qualifier": null}]], {"identifier": "Bluetooth Bitpool", "absolute": ["Bluetooth Bitpool"], "selector-path": ["Bluetooth Bitpool"], "selector-level": null, "selector-multiple": null}], ["section", [["paragraph", ["On macOS, using the pre-built clang binary has a header conflict (10.15).", " ", "In order to avoid the issue, the system headers need to be re-ordered:"], {"indentation": null}], ["syntax", [["line", ["cat >clang.options <<EOF"], {}], ["line", ["-isystem/opt/llvm/include"], {}], ["line", ["-isystem/opt/llvm/include/c++/v1"], {}], ["line", ["-isystem/opt/llvm/lib/clang/15.0.0/include"], {}], ["line", ["EOF"], {}], ["line", [""], {}]], {"type": "syntax/shell", "qualifier": null}], ["paragraph", ["Where ", "", ["literal", ["/opt/llvm"], {"cast": "system/directory"}], " is the installation prefix."], {"indentation": 0}], ["section", [["paragraph", ["When C++ compilation has issues:"], {"indentation": null}], ["syntax", [["line", ["cat >clang.options <<EOF"], {}], ["line", ["-isystem /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include"], {}], ["line", ["-isystem /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1"], {}], ["line", ["-isystem /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/12.0.0/include"], {}], ["line", ["EOF"], {}], ["line", [""], {}]], {"type": "syntax/shell", "qualifier": null}], ["syntax", [["line", ["env \"CFLAGS=--config $(pwd)/clang.options\" ..."], {}], ["line", [""], {}]], {"type": "syntax/shell", "qualifier": null}], ["directory", [["item", [["key", ["", "", ["literal", ["Issues"], {"cast": "control/context"}], ""], {}], ["value", [["sequence", [["item", [["paragraph", ["", ["reference", null, {"source": "<https://stackoverflow.com/questions/58628377/catalina-c-using-cmath-headers-yield-error-no-member-named-signbit-in-th>", "type": "hyperlink", "action": null, "cast": null, "url": "https://stackoverflow.com/questions/58628377/catalina-c-using-cmath-headers-yield-error-no-member-named-signbit-in-th"}], ""], {"indentation": null}]], {}]], {}]], {}]], {"identifier": "Issues"}]], {}]], {"identifier": "Catalina", "absolute": ["LLVM", "Catalina"], "selector-path": ["Catalina"], "selector-level": 1, "selector-multiple": null}]], {"identifier": "LLVM", "absolute": ["LLVM"], "selector-path": ["LLVM"], "selector-level": null, "selector-multiple": null}], ["section", [["admonition", [["directory", [["item", [["key", ["type"], {}], ["value", [["paragraph", ["", ["literal", ["filesystem"], {"cast": null}], ""], {"indentation": 2}]], {}]], {"identifier": "type"}], ["item", [["key", ["location"], {}], ["value", [["paragraph", ["", ["literal", ["/Library/Frameworks/Python.framework/Versions"], {"cast": null}], ""], {"indentation": 2}]], {}]], {"identifier": "location"}]], {}]], {"type": "CONTROL", "title": null}], ["paragraph", ["Scripts for maintaining a set of Python installations on macOS.", " ", "Presumed location: ", ["literal", ["/Library/Frameworks/Python.framework/Versions"], {"cast": null}], "."], {"indentation": 0}], ["directory", [["item", [["key", ["ftp-versions.sh"], {}], ["value", [["syntax", [["line", ["#!/bin/sh"], {}], ["line", ["# Get the unique set of 3.x versions from python.org/ftp/python/"], {}], ["line", [""], {}], ["line", ["MAJOR=3"], {}], ["line", ["ENL='\\"], {}], ["line", ["'"], {}], ["line", ["curl -s https://www.python.org/ftp/python/ | \\"], {}], ["line", ["\tsed \"s/[<>]/$ENL/g\" | \\"], {}], ["line", ["\tgrep href | \\"], {}], ["line", ["\tgrep -o '\\<'\"$MAJOR\"'\\.[0-9]\\+\\.[0-9]\\+\\>' | \\"], {}], ["line", ["\tsort -u"], {}], ["line", [""], {}]], {"type": "syntax/shell", "qualifier": null}]], {}]], {"identifier": "ftp-versions\u2219sh"}], ["item", [["key", ["ftp-fix-timecontext.sh"], {}], ["value", [["syntax", [["line", ["# Reformat ftp download anchors to inject a `date` attribute."], {}], ["line", ["# Convert the timestamps to something ISO-8601'ish. Absurd."], {}], ["line", ["sed \"$(printf '%s%s%s%s' \\"], {}], ["line", ["\t's/<a\\(.*\\)<\\/a>[[:space:]]*' \\"], {}], ["line", ["\t'\\([0-9]\\{1,2\\}\\)-\\([a-zA-Z]\\{3\\}\\)-\\([0-9]*\\)' \\"], {}], ["line", ["\t'.*\\([0-9][0-9]:[0-9][0-9]\\).*' \\"], {}], ["line", ["\t'/<a date=\"\\4-\\3-\\2 \\5\" \\1<\\/a>/'"], {}], ["line", [")\" | \\"], {}], ["line", ["sed \"$("], {}], ["line", ["\t# Build the substitutions for rewriting three character month identifiers"], {}], ["line", ["\t# with their corresponding numeric representation."], {}], ["line", ["\tlinenum='\\([^:]*\\):'"], {}], ["line", ["\tcaptures=\"$(yes '\\(.\\)' | head -6 | tr -d '\\n')\""], {}], ["line", ["\tsub='s\\/-[\\2\\5][\\3\\6][\\4\\7]-\\/-\\1-\\/'"], {}], ["line", ["\t# Initialize months reference file."], {}], ["line", ["\tcd \"$(mktemp -d)\" || exit"], {}], ["line", ["\techo 'jan feb mar apr may jun jul aug sep oct nov dec' | tr ' ' '\\n' >./months"], {}], ["line", ["\t# Get uppercase, join with lower; number the lines."], {}], ["line", ["\t# Substitute three character months for their corresponding (line) number."], {}], ["line", ["\tcat ./months | tr '[[:lower:]]' '[[:upper:]]' | lam - months | \\"], {}], ["line", ["\tgrep -n . | sed \"s/${linenum}${captures}.*/${sub}/\" | tr '\\n' ';'"], {}], ["line", ["\trm ./months"], {}], ["line", [")\""], {}], ["line", [""], {}]], {"type": "syntax/shell", "qualifier": null}]], {}]], {"identifier": "ftp-fix-timecontext\u2219sh"}], ["item", [["key", ["download-versions.sh"], {}], ["value", [["syntax", [["line", ["#!/bin/sh"], {}], ["line", ["# Get the unique set of 3.x (>3.6) versions from python.org/downloads/"], {}], ["line", [""], {}], ["line", ["MAJOR=3"], {}], ["line", ["ENL='\\"], {}], ["line", ["'"], {}], ["line", ["curl -s 'https://www.python.org/downloads/' | \\"], {}], ["line", ["\tsed \"s/<>/$ENL/g\" | \\"], {}], ["line", ["\tgrep -o '\\<'\"$MAJOR\"'\\.\\([6-9]\\|[0-9][0-9]\\+\\)\\.[0-9]\\+\\>' | \\"], {}], ["line", ["\tsort -u"], {}], ["line", [""], {}]], {"type": "syntax/shell", "qualifier": null}]], {}]], {"identifier": "download-versions\u2219sh"}], ["item", [["key", ["latest.sh"], {}], ["value", [["syntax", [["line", ["#!/bin/sh"], {}], ["line", ["# Find the latest release for each major and minor."], {}], ["line", [""], {}], ["line", ["sort -t'.' -k1,2 -k3nr | sort -u -t'.' -k1,2 | sort -t'.' -k1nr -k2nr"], {}], ["line", [""], {}]], {"type": "syntax/shell", "qualifier": null}]], {}]], {"identifier": "latest\u2219sh"}], ["item", [["key", ["installed.sh"], {}], ["value", [["syntax", [["line", ["#!/bin/sh"], {}], ["line", ["for x in 3.*/"], {}], ["line", ["do"], {}], ["line", ["\t$x/bin/python3 -c 'import sys; print(\".\".join(map(str, sys.version_info[:3])))'"], {}], ["line", ["done | sort -t'.' -k1nr -k2nr"], {}], ["line", [""], {}]], {"type": "syntax/shell", "qualifier": null}]], {}]], {"identifier": "installed\u2219sh"}], ["item", [["key", ["mkdelta.sh"], {}], ["value", [["syntax", [["line", ["#!/bin/sh"], {}], ["line", ["# Initialize the Delta directory with the information required by install-sources."], {}], ["line", ["# Collect installed versions, latest release versions, and join into the update set."], {}], ["line", [""], {}], ["line", ["vjoin ()"], {}], ["line", ["{"], {}], ["line", ["\tjoin -t. -o1.2 -o1.3 -o2.3 -1 2 -2 2 \"$@\" | sed 's/\\./ /g'"], {}], ["line", ["}"], {}], ["line", [""], {}], ["line", ["mkdir Delta || exit"], {}], ["line", ["sh ./ftp-versions.sh | sh ./latest.sh >./Delta/latest-releases"], {}], ["line", ["sh ./installed.sh >./Delta/installed-versions"], {}], ["line", ["vjoin >./Delta/updates \\"], {}], ["line", ["\t./Delta/installed-versions \\"], {}], ["line", ["\t./Delta/latest-releases"], {}], ["line", [""], {}]], {"type": "syntax/shell", "qualifier": null}]], {}]], {"identifier": "mkdelta\u2219sh"}], ["item", [["key", ["install-sources.sh"], {}], ["value", [["syntax", [["line", ["#!/bin/sh"], {}], ["line", ["# Install the sources of the updates designated by mkdelta."], {}], ["line", ["MAJOR=3"], {}], ["line", [""], {}], ["line", ["install_source ()"], {}], ["line", ["{"], {}], ["line", ["\tvminor=\"$1\""], {}], ["line", ["\tipatch=\"$2\""], {}], ["line", ["\tlpatch=\"$3\""], {}], ["line", [""], {}], ["line", ["\tlrelease=\"${MAJOR}.${vminor}.${lpatch}\""], {}], ["line", ["\tipath=\"../${MAJOR}.${vminor}/src\""], {}], ["line", ["\techo \"[$MAJOR.$vminor.$ipatch] -> $lrelease\""], {}], ["line", ["\tif test -e \"$ipath\""], {}], ["line", ["\tthen"], {}], ["line", ["\t\t# Presume build is in progress."], {}], ["line", ["\t\techo \"-> Skipping; '$ipath' is present.\""], {}], ["line", ["\t\tcontinue"], {}], ["line", ["\tfi"], {}], ["line", [""], {}], ["line", ["\tfilename=\"Python-${lrelease}\""], {}], ["line", ["\tri=\"https://www.python.org/ftp/python/${lrelease}/${filename}.tar.xz\""], {}], ["line", [""], {}], ["line", ["\t# Presume incompletion."], {}], ["line", ["\trm -f \"${filename}.tar.xz\" && fault-tool http-cache \"$ri\""], {}], ["line", [""], {}], ["line", ["\t# Extract and get signature."], {}], ["line", ["\ttar zxf \"${filename}.tar.xz\" || continue"], {}], ["line", ["\tshasum -a 512 \"${filename}.tar.xz\" >\"${filename}/.delta-signature\""], {}], ["line", ["\trm -f \"${filename}.tar.xz\""], {}], ["line", [""], {}], ["line", ["\t# Commit."], {}], ["line", ["\tmv \"${filename}\" \"$ipath\" || exit"], {}], ["line", ["}"], {}], ["line", [""], {}], ["line", ["cd /Library/Frameworks/Python.framework/Versions"], {}], ["line", ["while read line"], {}], ["line", ["do"], {}], ["line", ["\tset -- $line"], {}], ["line", ["\t(cd Delta && install_source \"$@\")"], {}], ["line", ["done <./Delta/updates"], {}], ["line", [""], {}], ["line", ["rm -f ./Delta/*"], {}], ["line", ["rmdir ./Delta"], {}], ["line", [""], {}]], {"type": "syntax/shell", "qualifier": null}]], {}]], {"identifier": "install-sources\u2219sh"}], ["item", [["key", ["integrate.sh"], {}], ["value", [["syntax", [["line", ["#!/bin/sh"], {}], ["line", ["# Build and install Python from source (pwd) on macOS."], {}], ["line", ["# Presumes write permissions on &<file:///Library/Frameworks/Python.framework/Versions>."], {}], ["line", ["export DYLD_LIBRARY_PATH=/usr/local/lib"], {}], ["line", ["export CC=\"$(xcrun --toolchain XcodeDefault -f clang)\""], {}], ["line", ["export SDK=\"$(xcrun --show-sdk-path)\""], {}], ["line", [""], {}], ["line", ["XCPATH=\"$(xcode-select --print-path)\""], {}], ["line", ["MAC=\"$XCPATH/Platforms/MacOSX.platform\""], {}], ["line", ["XCI=\"$MAC/Developer/SDKs/MacOSX.sdk/usr/include\""], {}], ["line", [""], {}], ["line", ["# -isystem is important; -I will (sometimes) put macOS' expat ahead of Python's."], {}], ["line", ["CFLAGS=\"-F$SDK/System/Library/Frameworks -isystem$XCI\""], {}], ["line", ["CFLAGS=\"$CFLAGS -include TargetConditionals.h\""], {}], ["line", ["CFLAGS=\"$CFLAGS -Wno-nullability-completeness -Wno-expansion-to-defined\""], {}], ["line", ["export CFLAGS"], {}], ["line", [""], {}], ["line", ["if ! : Possible LTO version mismatch."], {}], ["line", ["then"], {}], ["line", ["\texport CC=/opt/llvm/bin/clang"], {}], ["line", ["\texport PATH=/opt/llvm/bin:$PATH"], {}], ["line", ["fi"], {}], ["line", [""], {}], ["line", ["./configure \\"], {}], ["line", ["\t--disable-test-modules \\"], {}], ["line", ["\t--with-lto \\"], {}], ["line", ["\t--without-doc-strings \\"], {}], ["line", ["\t--with-computed-gotos \\"], {}], ["line", ["\t--with-openssl=/usr/local \\"], {}], ["line", ["\t--enable-optimizations \\"], {}], ["line", ["\t--enable-framework || exit"], {}], ["line", [""], {}], ["line", ["gmake -j 8 || exit"], {}], ["line", ["gmake install || exit"], {}]], {"type": "syntax/shell", "qualifier": null}]], {}]], {"identifier": "integrate\u2219sh"}], ["item", [["key", ["update.sh"], {}], ["value", [["syntax", [["line", ["#!/bin/sh"], {}], ["line", ["# Update pip and site-packages of each installed version using pip."], {}], ["line", ["echo $(pwd)"], {}], ["line", ["for x in *.*/"], {}], ["line", ["do"], {}], ["line", ["\tPIP=\"$x/bin/python3 -m pip\""], {}], ["line", ["\techo \"-> $PIP\""], {}], ["line", ["\t$PIP install -U pip || exit"], {}], ["line", ["\t$PIP list --outdated --format=json | jq -r '.[]|.name' | $PIP install -U -r /dev/stdin || exit"], {}], ["line", ["done"], {}], ["line", [""], {}]], {"type": "syntax/shell", "qualifier": null}]], {}]], {"identifier": "update\u2219sh"}]], {}]], {"identifier": "Python", "absolute": ["Python"], "selector-path": ["Python"], "selector-level": null, "selector-multiple": null}], ["section", [["paragraph", ["", ["reference", null, {"source": "<https://apps.apple.com/us/app/macos-catalina/id1466841314>", "type": "hyperlink", "action": null, "cast": null, "url": "https://apps.apple.com/us/app/macos-catalina/id1466841314"}], ""], {"indentation": null}]], {"identifier": "10.15", "absolute": ["10.15"], "selector-path": ["10.15"], "selector-level": null, "selector-multiple": null}]], {}]], {}]