["factor", [["chapter", [["admonition", [["directory", [["item", [["key", ["title"], {}], ["value", [["paragraph", ["", ["literal", ["That's Not Which"], {"cast": null}], ""], {"indentation": 2}]], {}]], {"identifier": "title"}]], {}]], {"type": "CONTEXT", "title": null}], ["paragraph", ["The ubiquitous ", "", ["literal", ["which"], {"cast": "system/command"}], " system command is not defined by POSIX."], {"indentation": 0}], ["paragraph", ["Practically, this is not a problem on modern systems. It's usually available and if it weren't,", " ", "it's trivial to implement in the language of your choice."], {"indentation": null}], ["section", [["paragraph", ["There is a specified alternative that has received attention on the orange site in the past:", " ", "", ["literal", ["command -v"], {"cast": null}], ". There is one problem with this alternative: it's not ", ["literal", ["which"], {"cast": null}], ". ", ["literal", ["which"], {"cast": null}], " finds", " ", "an executable matching the given name in ", "", ["literal", ["PATH"], {"cast": "system/environment"}], ".", " ", "", ["literal", ["command -v"], {"cast": null}], " does this as well, but there is one extra feature you get: it tells you the \"location\" of", " ", "shell built-ins, aliases, and functions. This can create problems when your script is ", ["emphasis", ["specifically"], {"weight": "1"}], " ", "looking for an executable ", ["emphasis", ["file's"], {"weight": "1"}], " location. Happen to be looking for an executable ", ["emphasis", ["file"], {"weight": "1"}], " named", " ", "after a builtin? Happen to have a function with the same name as the executable ", ["emphasis", ["file"], {"weight": "1"}], " you're looking", " ", "for? ", ["literal", ["command -v"], {"cast": null}], " will report success and happily feed the name back to you."], {"indentation": null}]], {"identifier": "Specified Alternative", "absolute": ["Specified Alternative"], "selector-path": ["Specified Alternative"], "selector-level": null, "selector-multiple": null}], ["section", [["paragraph", ["When I use the ", ["literal", ["which"], {"cast": null}], " command, I'm doing one of two things."], {"indentation": null}], ["sequence", [["item", [["paragraph", ["Checking for the presence of an executable ", ["emphasis", ["file"], {"weight": "1"}], "."], {"indentation": null}]], {}], ["item", [["paragraph", ["Getting the location of an executable ", ["emphasis", ["file"], {"weight": "1"}], "."], {"indentation": null}]], {}]], {}], ["paragraph", ["", ["literal", ["command -v"], {"cast": null}], " offers the possibility a false positive in both cases. The general use case", " ", "here is common when probing the system for executables ", ["emphasis", ["that will not be ran by the shell"], {"weight": "2"}], "."], {"indentation": 0}], ["paragraph", ["If you are running the reported command in the shell, then ", ["literal", ["command -v"], {"cast": null}], " ", ["emphasis", ["is"], {"weight": "2"}], " the correct", " ", "method given that you want the shell environment to be able to override the raw executable."], {"indentation": null}]], {"identifier": "Relevance", "absolute": ["Relevance"], "selector-path": ["Relevance"], "selector-level": null, "selector-multiple": null}], ["section", [["paragraph", ["Some shells have been identifying ", ["literal", ["which"], {"cast": null}], " as a built-in that is equivalent to ", ["literal", ["command -v"], {"cast": null}], ".", " ", "", ["literal", ["which"], {"cast": null}], " isn't even ", ["literal", ["which"], {"cast": null}], " in some contexts. All the more reason to only use ", ["literal", ["#!/bin/sh"], {"cast": null}], "", " ", "and hope that it's not incorrectly mapped to another flavor."], {"indentation": null}]], {"identifier": "Worse Yet", "absolute": ["Worse Yet"], "selector-path": ["Worse Yet"], "selector-level": null, "selector-multiple": null}], ["section", [["paragraph", ["It is specified that ", ["literal", ["command -v"], {"cast": null}], " will report success on aliases, functions, and builtins:"], {"indentation": null}], ["set", [["item", [["paragraph", ["", ["reference", null, {"source": "<https://pubs.opengroup.org/onlinepubs/9699919799/utilities/command.html>", "type": "hyperlink", "action": null, "cast": null, "url": "https://pubs.opengroup.org/onlinepubs/9699919799/utilities/command.html"}], ""], {"indentation": null}]], {}]], {}]], {"identifier": "References", "absolute": ["References"], "selector-path": ["References"], "selector-level": null, "selector-multiple": null}]], {}]], {}]