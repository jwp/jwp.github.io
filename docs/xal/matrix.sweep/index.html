<html root="2"><head><title>xal.matrix.sweep</title><meta charset="utf-8"/><link as="style" rel="preload" href="../../.legacy-web/core.css"></link><link as="style" rel="preload" href="../../.legacy-web/factor.css"></link><link rel="stylesheet" href="../../.legacy-web/core.css"></link><link rel="stylesheet" href="../../.legacy-web/factor.css"></link></head><body><main><h1><span class="prefix"></span><div class="page-subject"><img class="icon" src="../../.factor-type-icon/if.fault.io/python-module.svg"></img><span class="subject-identifier">sweep</span><span class="element-status"><span class="nothing-missed">0</span></span><a href="http://if.fault.io/factors/python.module"><code class="type">python.module</code></a></div><div class="page-context"><a href="../"><img class="icon" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTYiIGhlaWdodD0iMjU2Ij48dGV4dCB4PSI0IiB5PSIwLjg4ZW0iIGZvbnQtc2l6ZT0iMjQ4Ij7wn5SWPC90ZXh0Pjwvc3ZnPg=="></img></a><span class="context-identifier">xal</span></div></h1><section class="chapter"><p><span class="text.normal">Normalize and filter link data.</span></p></section><section class="unspecified" documented="true" local-identifier="Adjustments" id="Adjustments"><h1><span class="prefix"></span><a class="title" href="#Adjustments"><span class="text.normal">Adjustments</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type"></span></div></h1><dl class="text.mapping"><div id="Adjustments.link" documented="true"><dt><a class="dkn" href="#Adjustments.link"></a><span class="directory-key"><span class="text.normal">link</span></span></dt><dd><div class="status"></div><ul class="text.set"><li><p><span class="text.normal">Force "insecure" schemes, ftp and http for consistency. (Publish with +s as desired)</span></p></li><li><p><span class="text.normal">Optionally, filter by exact match or by prefix (pygtrie).</span></p></li></ul></dd></div><div id="Adjustments.time-context" documented="true"><dt><a class="dkn" href="#Adjustments.time-context"></a><span class="directory-key"><span class="text.normal">time-context</span></span></dt><dd><div class="status"></div><ul class="text.set"><li><p><span class="text.normal">Convert into </span><code class="">ISO-8601</code><span class="text.normal"> strings.</span></p></li><li><p><span class="text.normal">Adjust precision when the point falls outside of limits.</span></p></li></ul></dd></div><div id="Adjustments.icon" documented="true"><dt><a class="dkn" href="#Adjustments.icon"></a><span class="directory-key"><span class="text.normal">icon</span></span></dt><dd><div class="status"></div><ul class="text.set"><li><p><span class="text.normal">Transparent</span></p></li></ul></dd></div><div id="Adjustments.titles" documented="true"><dt><a class="dkn" href="#Adjustments.titles"></a><span class="directory-key"><span class="text.normal">titles</span></span></dt><dd><div class="status"></div><ul class="text.set"><li><p><span class="text.normal">Normalize title whitespaces.</span></p></li><li><p><span class="text.normal">Optionally, remove many emoji characters. (incomplete range list)</span></p></li><li><p><span class="text.normal">Filter titles that are trivially redundant with the link itself.</span></p></li></ul></dd></div></dl></section><section class="import" documented="false" local-identifier="sys" id="sys"><h1><span class="prefix"></span><a class="title" href="#sys"><span class="text.normal">sys</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">import</span></div></h1></section><section class="import" documented="false" local-identifier="functools" id="functools"><h1><span class="prefix"></span><a class="title" href="#functools"><span class="text.normal">functools</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">import</span></div></h1></section><section class="import" documented="false" local-identifier="Iterable" id="Iterable"><h1><span class="prefix"></span><a class="title" href="#Iterable"><span class="text.normal">Iterable</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">import</span></div></h1></section><section class="import" documented="false" local-identifier="TypeAlias" id="TypeAlias"><h1><span class="prefix"></span><a class="title" href="#TypeAlias"><span class="text.normal">TypeAlias</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">import</span></div></h1></section><section class="import" documented="false" local-identifier="Callable" id="Callable"><h1><span class="prefix"></span><a class="title" href="#Callable"><span class="text.normal">Callable</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">import</span></div></h1></section><section class="import" documented="false" local-identifier="process" id="process"><h1><span class="prefix"></span><a class="title" href="#process"><span class="text.normal">process</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">import</span></div></h1></section><section class="import" documented="false" local-identifier="recognition" id="recognition"><h1><span class="prefix"></span><a class="title" href="#recognition"><span class="text.normal">recognition</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">import</span></div></h1></section><section class="import" documented="false" local-identifier="Timestamp" id="Timestamp"><h1><span class="prefix"></span><a class="title" href="#Timestamp"><span class="text.normal">Timestamp</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">import</span></div></h1></section><section class="import" documented="false" local-identifier="Measure" id="Measure"><h1><span class="prefix"></span><a class="title" href="#Measure"><span class="text.normal">Measure</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">import</span></div></h1></section><section class="import" documented="false" local-identifier="utc" id="utc"><h1><span class="prefix"></span><a class="title" href="#utc"><span class="text.normal">utc</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">import</span></div></h1></section><section class="data" documented="false" local-identifier="normal" id="normal"><h1><span class="prefix"></span><a class="title" href="#normal"><span class="text.normal">normal</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">data</span></div></h1><pre class="text.syntax"><code class="source">normal = {
	'https': 'http',
	'ftps': 'ftp',
}
</code></pre></section><section class="function" documented="false" local-identifier="_unicode_emoji_context" id="_unicode_emoji_context"><h1><span class="prefix"></span><a class="title" href="#_unicode_emoji_context"><span class="text.normal">_unicode_emoji_context</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">function</span></div></h1><p><code class="signature">_unicode_emoji_context()</code></p></section><section class="function" documented="true" local-identifier="demoji" id="demoji"><h1><span class="prefix"></span><a class="title" href="#demoji"><span class="text.normal">demoji</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">function</span></div></h1><p><code class="signature">demoji(string)</code></p><p><span class="text.normal">Destroy emojis and most sequences found in the </span><a class="factor-local" href="#demoji.Parameters.string"><span class="parameter">string</span></a><span class="text.normal">.</span></p></section><section class="function" documented="true" local-identifier="relink" id="relink"><h1><span class="prefix"></span><a class="title" href="#relink"><span class="text.normal">relink</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">function</span></div></h1><p><code class="signature">relink(link)</code></p><p><span class="text.normal">Normalize the link in order to maximize reductions.</span><span class="text.line-break"> </span><span class="text.normal">Trigger filtering with empty string returns.</span></p></section><section class="data" documented="false" local-identifier="time_limits" id="time_limits"><h1><span class="prefix"></span><a class="title" href="#time_limits"><span class="text.normal">time_limits</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">data</span></div></h1><pre class="text.syntax"><code class="source">time_limits = (
	Timestamp.of(year=1900),
	utc().elapse(year=1).truncate('year'),
)
</code></pre></section><section class="function" documented="true" local-identifier="restamp" id="restamp"><h1><span class="prefix"></span><a class="title" href="#restamp"><span class="text.normal">restamp</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">function</span></div></h1><p><code class="signature">restamp(ts)</code></p><p><span class="text.normal">Interpret the timestamp, </span><a class="factor-local" href="#restamp.Parameters.ts"><span class="parameter">ts</span></a><span class="text.normal">, as a </span><a class="none" href="http://fault.io/dev/null"><span class="invalid">fault.time.types.Timestamp</span></a><span class="text.normal"> instance.</span><span class="text.line-break"> </span><span class="text.normal">Parsing an </span><code class="">ISO-8601</code><span class="text.normal"> formatted string or</span><span class="text.line-break"> </span><span class="text.normal">converting a decimal unix epoch string.</span></p><p><span class="text.normal">When the interpreted timestamp is outside of the </span><a class="factor-local" href="#restamp.Parameters.limits"><span class="parameter">limits</span></a><span class="text.normal">,</span><span class="text.line-break"> </span><span class="text.normal">adjust the precision until it falls within.</span></p><section class="unspecified" documented="true" local-identifier="Returns" id="restamp.Returns"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#restamp">restamp</a><a class="title" href="#restamp.Returns"><span class="text.normal">Returns</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type"></span></div></h1><p><span class="text.normal">The interpreted </span><a class="none" href="http://fault.io/dev/null"><span class="invalid">fault.time.types.Timestamp</span></a><span class="text.normal"> instance truncated to the minute.</span></p></section></section><section class="function" documented="true" local-identifier="retitle" id="retitle"><h1><span class="prefix"></span><a class="title" href="#retitle"><span class="text.normal">retitle</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">function</span></div></h1><p><code class="signature">retitle(title)</code></p><p><span class="text.normal">Normalize the whitespace in </span><a class="factor-local" href="#retitle.Parameters.title"><span class="parameter">title</span></a><span class="text.normal">.</span></p></section><section class="function" documented="true" local-identifier="sequence" id="sequence"><h1><span class="prefix"></span><a class="title" href="#sequence"><span class="text.normal">sequence</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">function</span></div></h1><p><code class="signature">sequence(record)</code></p><p><span class="text.normal">Construct a sequenced record for serialization.</span></p></section><section class="function" documented="true" local-identifier="structure" id="structure"><h1><span class="prefix"></span><a class="title" href="#structure"><span class="text.normal">structure</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">function</span></div></h1><p><code class="signature">structure(line)</code></p><p><span class="text.normal">Construct a tuple of four fields from the given line.</span></p></section><section class="function" documented="true" local-identifier="trailing" id="trailing"><h1><span class="prefix"></span><a class="title" href="#trailing"><span class="text.normal">trailing</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">function</span></div></h1><p><code class="signature">trailing(link)</code></p><p><span class="text.normal">Normalize host references to include trailing slash.</span></p></section><section class="function" documented="false" local-identifier="normalize" id="normalize"><h1><span class="prefix"></span><a class="title" href="#normalize"><span class="text.normal">normalize</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">function</span></div></h1><p><code class="signature">normalize(records)</code></p></section><section class="function" documented="true" local-identifier="rewrite" id="rewrite"><h1><span class="prefix"></span><a class="title" href="#rewrite"><span class="text.normal">rewrite</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">function</span></div></h1><p><code class="signature">rewrite(find, records)</code></p><p><span class="text.normal">Adjust the prefixes on the given records.</span></p></section><section class="function" documented="true" local-identifier="rewriting" id="rewriting"><h1><span class="prefix"></span><a class="title" href="#rewriting"><span class="text.normal">rewriting</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">function</span></div></h1><p><code class="signature">rewriting(rwt)</code></p><p><span class="text.normal">Construct a filter rewriting the prefixes defined in </span><a class="factor-local" href="#rewriting.Parameters.rwt"><span class="parameter">rwt</span></a><span class="text.normal">.</span></p><p><span class="text.normal">Rewrites to </span><a class="invalid" href="#None"><span class="unknown">None</span></a><span class="text.normal"> are discarded.</span></p></section><section class="function" documented="false" local-identifier="ignoring" id="ignoring"><h1><span class="prefix"></span><a class="title" href="#ignoring"><span class="text.normal">ignoring</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">function</span></div></h1><p><code class="signature">ignoring(values, records)</code></p></section><section class="function" documented="false" local-identifier="scanning" id="scanning"><h1><span class="prefix"></span><a class="title" href="#scanning"><span class="text.normal">scanning</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">function</span></div></h1><p><code class="signature">scanning(v, records)</code></p></section><section class="function" documented="true" local-identifier="interpret_filters" id="interpret_filters"><h1><span class="prefix"></span><a class="title" href="#interpret_filters"><span class="text.normal">interpret_filters</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">function</span></div></h1><p><code class="signature">interpret_filters(files)</code></p><p><span class="text.normal">Load the filter files and emit the constructed filters.</span></p></section><section class="data" documented="false" local-identifier="restricted" id="restricted"><h1><span class="prefix"></span><a class="title" href="#restricted"><span class="text.normal">restricted</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">data</span></div></h1><pre class="text.syntax"><code class="source">restricted = {
	'-E': ('field-replace', True, 'title-strip-emoji'),
}
</code></pre></section><section class="data" documented="false" local-identifier="required" id="required"><h1><span class="prefix"></span><a class="title" href="#required"><span class="text.normal">required</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">data</span></div></h1><pre class="text.syntax"><code class="source">required = {
	'-X': ('sequence-append', 'text-filters'),
	'-f': ('sequence-append', 'function-false-filters'),
	'-F': ('sequence-append', 'function-true-filters'),
}
</code></pre></section><section class="function" documented="false" local-identifier="python_filters" id="python_filters"><h1><span class="prefix"></span><a class="title" href="#python_filters"><span class="text.normal">python_filters</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">function</span></div></h1><p><code class="signature">python_filters(filtertype, freferences, series)</code></p></section><section class="function" documented="false" local-identifier="main" id="main"><h1><span class="prefix"></span><a class="title" href="#main"><span class="text.normal">main</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">function</span></div><code class="type"><a class="none" href="http://fault.io/dev/null"><span class="invalid">process.Exit</span></a></code></h1><p><code class="signature">main(inv)</code></p></section><h1 class="footing"></h1></main></body></html>